<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports"
              xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
              xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports
              http://jasperreports.sourceforge.net/xsd/jasperreport.xsd"
              name="dashboard-report" pageWidth="595" pageHeight="842"
              columnWidth="515" leftMargin="40" rightMargin="40"
              topMargin="50" bottomMargin="50">

    <!-- Parameters -->
    <parameter name="LOGO_PATH" class="java.lang.String"/>
    <parameter name="REPORT_DATE" class="java.lang.String"/>
    <parameter name="TOTAL_USERS" class="java.lang.Integer"/>
    <parameter name="ACTIVE_USERS" class="java.lang.Integer"/>
    <parameter name="PENDING_USERS" class="java.lang.Integer"/>
    <parameter name="BANNED_USERS" class="java.lang.Integer"/>
    <parameter name="USERS_CREATED_THIS_MONTH" class="java.lang.Integer"/>
    <parameter name="TOTAL_CVS" class="java.lang.Integer"/>
    <parameter name="PUBLIC_CVS" class="java.lang.Integer"/>
    <parameter name="PRIVATE_CVS" class="java.lang.Integer"/>
    <parameter name="CVS_CREATED_THIS_MONTH" class="java.lang.Integer"/>

    <!-- Fields from ActivityDto -->
    <field name="type" class="java.lang.String"/>
    <field name="description" class="java.lang.String"/>
    <field name="timestamp" class="java.lang.String"/>

    <!-- Title Band -->
    <title>
        <band height="100">
            <staticText>
                <reportElement x="0" y="10" width="515" height="30"/>
                <textElement textAlignment="Center">
                    <font size="22" isBold="true"/>
                </textElement>
                <text><![CDATA[MyBlog Dashboard Report]]></text>
            </staticText>
            <textField>
                <reportElement x="0" y="50" width="515" height="20"/>
                <textElement textAlignment="Center">
                    <font size="10"/>
                </textElement>
                <textFieldExpression><![CDATA["Generated on: " + $P{REPORT_DATE}]]></textFieldExpression>
            </textField>
            <line>
                <reportElement x="0" y="90" width="515" height="1"/>
            </line>
        </band>
    </title>

    <!-- Page Header -->
    <pageHeader>
        <band height="200">
            <staticText>
                <reportElement x="0" y="10" width="515" height="25"/>
                <textElement>
                    <font size="16" isBold="true"/>
                </textElement>
                <text><![CDATA[User Statistics]]></text>
            </staticText>

            <!-- Users Box -->
            <rectangle>
                <reportElement x="0" y="40" width="250" height="70" backcolor="#E3F2FD"/>
            </rectangle>
            <staticText>
                <reportElement x="10" y="45" width="230" height="20"/>
                <textElement>
                    <font size="12" isBold="true"/>
                </textElement>
                <text><![CDATA[Total Users]]></text>
            </staticText>
            <textField>
                <reportElement x="10" y="70" width="230" height="35"/>
                <textElement>
                    <font size="24" isBold="true"/>
                </textElement>
                <textFieldExpression><![CDATA[$P{TOTAL_USERS}]]></textFieldExpression>
            </textField>

            <!-- Active Users Box -->
            <rectangle>
                <reportElement x="265" y="40" width="250" height="70" backcolor="#C8E6C9"/>
            </rectangle>
            <staticText>
                <reportElement x="275" y="45" width="230" height="20"/>
                <textElement>
                    <font size="12" isBold="true"/>
                </textElement>
                <text><![CDATA[Active Users]]></text>
            </staticText>
            <textField>
                <reportElement x="275" y="70" width="230" height="35"/>
                <textElement>
                    <font size="24" isBold="true"/>
                </textElement>
                <textFieldExpression><![CDATA[$P{ACTIVE_USERS}]]></textFieldExpression>
            </textField>

            <!-- User Details -->
            <staticText>
                <reportElement x="10" y="120" width="100" height="20"/>
                <textElement>
                    <font size="10" isBold="true"/>
                </textElement>
                <text><![CDATA[Pending Users:]]></text>
            </staticText>
            <textField>
                <reportElement x="120" y="120" width="100" height="20"/>
                <textElement>
                    <font size="10"/>
                </textElement>
                <textFieldExpression><![CDATA[$P{PENDING_USERS}]]></textFieldExpression>
            </textField>

            <staticText>
                <reportElement x="10" y="145" width="100" height="20"/>
                <textElement>
                    <font size="10" isBold="true"/>
                </textElement>
                <text><![CDATA[Banned Users:]]></text>
            </staticText>
            <textField>
                <reportElement x="120" y="145" width="100" height="20"/>
                <textElement>
                    <font size="10"/>
                </textElement>
                <textFieldExpression><![CDATA[$P{BANNED_USERS}]]></textFieldExpression>
            </textField>

            <staticText>
                <reportElement x="10" y="170" width="150" height="20"/>
                <textElement>
                    <font size="10" isBold="true"/>
                </textElement>
                <text><![CDATA[Users Created This Month:]]></text>
            </staticText>
            <textField>
                <reportElement x="170" y="170" width="100" height="20"/>
                <textElement>
                    <font size="10"/>
                </textElement>
                <textFieldExpression><![CDATA[$P{USERS_CREATED_THIS_MONTH}]]></textFieldExpression>
            </textField>
        </band>
    </pageHeader>

    <!-- Column Header for CVs Section -->
    <columnHeader>
        <band height="200">
            <staticText>
                <reportElement x="0" y="10" width="515" height="25"/>
                <textElement>
                    <font size="16" isBold="true"/>
                </textElement>
                <text><![CDATA[CV Statistics]]></text>
            </staticText>

            <!-- Total CVs Box -->
            <rectangle>
                <reportElement x="0" y="40" width="250" height="70" backcolor="#BBDEFB"/>
            </rectangle>
            <staticText>
                <reportElement x="10" y="45" width="230" height="20"/>
                <textElement>
                    <font size="12" isBold="true"/>
                </textElement>
                <text><![CDATA[Total CVs]]></text>
            </staticText>
            <textField>
                <reportElement x="10" y="70" width="230" height="35"/>
                <textElement>
                    <font size="24" isBold="true"/>
                </textElement>
                <textFieldExpression><![CDATA[$P{TOTAL_CVS}]]></textFieldExpression>
            </textField>

            <!-- Public CVs Box -->
            <rectangle>
                <reportElement x="265" y="40" width="250" height="70" backcolor="#E1BEE7"/>
            </rectangle>
            <staticText>
                <reportElement x="275" y="45" width="230" height="20"/>
                <textElement>
                    <font size="12" isBold="true"/>
                </textElement>
                <text><![CDATA[Public CVs]]></text>
            </staticText>
            <textField>
                <reportElement x="275" y="70" width="230" height="35"/>
                <textElement>
                    <font size="24" isBold="true"/>
                </textElement>
                <textFieldExpression><![CDATA[$P{PUBLIC_CVS}]]></textFieldExpression>
            </textField>

            <!-- CV Details -->
            <staticText>
                <reportElement x="10" y="120" width="100" height="20"/>
                <textElement>
                    <font size="10" isBold="true"/>
                </textElement>
                <text><![CDATA[Private CVs:]]></text>
            </staticText>
            <textField>
                <reportElement x="120" y="120" width="100" height="20"/>
                <textElement>
                    <font size="10"/>
                </textElement>
                <textFieldExpression><![CDATA[$P{PRIVATE_CVS}]]></textFieldExpression>
            </textField>

            <staticText>
                <reportElement x="10" y="145" width="150" height="20"/>
                <textElement>
                    <font size="10" isBold="true"/>
                </textElement>
                <text><![CDATA[CVs Created This Month:]]></text>
            </staticText>
            <textField>
                <reportElement x="170" y="145" width="100" height="20"/>
                <textElement>
                    <font size="10"/>
                </textElement>
                <textFieldExpression><![CDATA[$P{CVS_CREATED_THIS_MONTH}]]></textFieldExpression>
            </textField>

            <!-- Recent Activities Header -->
            <line>
                <reportElement x="0" y="180" width="515" height="1"/>
            </line>
            <staticText>
                <reportElement x="0" y="185" width="515" height="15"/>
                <textElement>
                    <font size="12" isBold="true"/>
                </textElement>
                <text><![CDATA[Recent Activities]]></text>
            </staticText>
        </band>
    </columnHeader>

    <!-- Detail Band for Activities -->
    <detail>
        <band height="30">
            <rectangle>
                <reportElement x="0" y="2" width="515" height="25" backcolor="#F5F5F5"/>
            </rectangle>
            <textField>
                <reportElement x="10" y="5" width="150" height="20"/>
                <textElement>
                    <font size="9" isBold="true"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{type}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="170" y="5" width="250" height="20"/>
                <textElement>
                    <font size="9"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{description}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="430" y="5" width="80" height="20"/>
                <textElement textAlignment="Right">
                    <font size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{timestamp}]]></textFieldExpression>
            </textField>
        </band>
    </detail>

    <!-- Page Footer -->
    <pageFooter>
        <band height="30">
            <textField>
                <reportElement x="0" y="10" width="515" height="20"/>
                <textElement textAlignment="Center">
                    <font size="8"/>
                </textElement>
                <textFieldExpression><![CDATA["Page " + $V{PAGE_NUMBER}]]></textFieldExpression>
            </textField>
        </band>
    </pageFooter>
</jasperReport>
